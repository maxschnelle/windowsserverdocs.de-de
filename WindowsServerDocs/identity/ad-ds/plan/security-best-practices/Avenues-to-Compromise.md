---
ms.assetid: d7a4d2e1-217d-4ffc-93f0-817149bd9e7f
title: Wege der Gefährdung
description: ''
author: MicrosoftGuyJFlo
ms.author: joflore
manager: mtillman
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server
ms.technology: identity-adds
ms.openlocfilehash: b2233a638aa0a422d5792f8c949c46ac8de099ba
ms.sourcegitcommit: 07c9d4ea72528401314e2789e3bc2e688fc96001
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/29/2020
ms.locfileid: "76822043"
---
# <a name="avenues-to-compromise"></a>Wege der Gefährdung

>Gilt für: Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

*Gesetz Nummer 7: das sicherste Netzwerk ist eine wohl verwaltete Netzwerk.* - [10 unveränderliche Gesetze der Sicherheitsverwaltung](https://technet.microsoft.com/library/cc722488.aspx)  
  
In Organisationen, in denen schwerwiegende Kompromittierung auftreten, zeigen die Bewertungen in der Regel, dass die Organisation nur begrenzten Einblick in den tatsächlichen Zustand Ihrer IT-Infrastrukturen hat, was sich deutlich von ihrer "wie dokumentiert" unterscheiden kann. Zuständen. Diese Abweichungen führen zu Sicherheitsrisiken, die eine Gefährdung der Umgebung zur Verfügung stellen, oft mit geringem Risiko der Ermittlung, bis der Kompromiss zu dem Punkt kommt, an dem die Angreifer die Umgebung effektiv "besitzen".  
  
Ausführliche Bewertungen der AD DS Konfiguration, Public Key Infrastructure (PKIs), Server, Arbeitsstationen, Anwendungen, Zugriffs Steuerungs Listen (Access Control Lists, ACLs) und anderer Technologien in diesen Organisationen zeigen Fehlkonfigurationen und Sicherheitsrisiken, die bei wieder hergestellt, hätte die anfängliche Gefährdung möglicherweise verhindert.  
  
Bei der Analyse der IT-Dokumentation,-Prozesse und-Prozeduren werden Sicherheitslücken identifiziert, Active Directory die durch Lücken in administrativen Verfahren eingeführt werden Eine vollständig gefährdete Gesamtstruktur ist eine, in der Angreifer nicht nur einzelne Systeme, Anwendungen oder Benutzerkonten kompromittieren, sondern Ihren Zugriff ausweiten, um eine Berechtigungsebene zu erhalten, in der Sie alle Aspekte der Gesamtstruktur ändern oder zerstören können. Wenn eine Active Directory-Installation bis zu diesem Grad kompromittiert wurde, können Angreifer Änderungen vornehmen, die es Ihnen ermöglichen, in der gesamten Umgebung vorhanden zu sein, um das Verzeichnis und die von ihm verwalteten Systeme und Konten zu zerstören.  
  
Obwohl eine Reihe von häufig genutzten Sicherheitsrisiken in den folgenden Beschreibungen keine Angriffe auf Active Directory sind, können Angreifer in einer Umgebung, die zum Ausführen der Berechtigungs Ausweitung verwendet werden kann Erhöhung) Angriffe und, um AD DS zu erreichen und zu kompromittieren.  
  
In diesem Abschnitt dieses Dokuments werden die Mechanismen beschrieben, die Angreifer in der Regel verwenden, um Zugriff auf die-Infrastruktur zu erhalten und schließlich Rechte Erweiterungs Angriffe zu starten. Weitere Informationen finden Sie auch in den folgenden Abschnitten:  
  
-   [Reduzieren der Angriffsfläche für Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md) Ausführliche Empfehlungen für die sichere Konfiguration Active Directory.  
  
-   [Überwachungs Active Directory auf Anzeichen einer](../../../ad-ds/plan/security-best-practices/Monitoring-Active-Directory-for-Signs-of-Compromise.md) Gefährdung Empfehlungen zum Erkennen von Kompromittierung  
  
-   [Planen](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Planning-for-Compromise.md) der Gefährdung Allgemeine Ansätze zum Vorbereiten von Angriffen auf die Infrastruktur aus IT-und Geschäftsperspektiven  
  
> [!NOTE]  
> Obwohl sich dieses Dokument auf Active Directory und Windows-Systemen konzentriert, die Teil einer AD DS Domäne sind, konzentrieren sich Angreifer selten nur auf Active Directory und Windows. In Umgebungen mit einer Mischung aus Betriebssystemen, Verzeichnissen, Anwendungen und Datenrepository ist es üblich, dass nicht-Windows-Systeme ebenfalls kompromittiert wurden. Dies trifft vor allem dann zu, wenn die Systeme eine Brücke zwischen Windows-und nicht-Windows-Umgebungen bieten, z. b. Dateiserver, auf die von Windows-und UNIX-oder Linux-Clients zugegriffen wird, Verzeichnisse, die Authentifizierungsdienste für mehrere Betriebssysteme bereitstellen oder Metaverzeichnisse, die Daten über verschiedenartige Verzeichnisse synchronisieren.  
>   
> AD DS ist aufgrund der zentralisierten Zugriffs-und Konfigurations Verwaltungsfunktionen für Windows-Systeme, aber für andere Clients vorgesehen. Alle anderen Verzeichnisse oder Anwendungen, die Authentifizierungs-und Konfigurations Verwaltungsdienste bereitstellen, können von ermittelten Angreifern verwendet werden. Obwohl es sich bei diesem Dokument um Schutzmaßnahmen handelt, mit denen die Wahrscheinlichkeit einer Gefährdung von Active Directory Installationen reduziert werden kann, sollten alle Organisationen, die nicht-Windows-Computer,-Verzeichnisse,-Anwendungen oder-Datendepots enthalten, auch vorbereiten. Angriffe gegen diese Systeme.  
  
## <a name="initial-breach-targets"></a>Anfängliche Verletzungs Ziele  
Niemand absichtlich erstellt eine IT-Infrastruktur, die das Unternehmen kompromittiert. Wenn eine Active Directory-Gesamtstruktur erstmalig erstellt wird, ist Sie normalerweise intakt und aktuell. Seit Jahren und neuen Betriebssystemen und Anwendungen werden Sie der Gesamtstruktur hinzugefügt. Da die von Active Directory bereitgestellten Vorteile der Verwaltbarkeit erkannt werden, werden dem Verzeichnis mehr und mehr Inhalte hinzugefügt, und mehr Benutzer integrieren Ihre Computer oder Anwendungen in AD DS, und die Domänen werden aktualisiert, um neue Funktionen zu unterstützen, die von den meisten aktuelle Versionen des Windows-Betriebssystems. Was auch im Laufe der Zeit passiert, besteht darin, dass auch wenn eine neue Infrastruktur hinzugefügt wird, andere Teile der Infrastruktur möglicherweise nicht beibehalten werden, auch wenn Sie ursprünglich waren, Systeme und Anwendungen ordnungsgemäß funktionieren und daher nicht empfangen werden. Beachten Sie, dass Organisationen daran denken, dass Sie Ihre Legacy Infrastruktur nicht beseitigt haben. Je nachdem, was wir bei der Bewertung gefährdeter Infrastrukturen sehen, desto älter, größer und komplexer die Umgebung, desto wahrscheinlicher ist es, dass es zahlreiche Instanzen von häufig genutzten Sicherheitsrisiken gibt.  
  
Unabhängig von der Motivation des Angreifers beginnen die meisten Informations Sicherheitsverletzungen mit der Gefährdung von einem oder zwei Systemen gleichzeitig. Diese anfänglichen Ereignisse oder Einstiegspunkte im Netzwerk nutzen häufig Sicherheitsrisiken, die möglicherweise behoben wurden, aber nicht. Der [2012 Data Verletzungs-Untersuchungsbericht (dbir)](http://www.verizonbusiness.com/resources/reports/rp_data-breach-investigations-report-2012_en_xg.pdf), bei dem es sich um eine jährliche Studie handelt, die vom Verizon-Risiko Team in Zusammenarbeit mit einer Reihe von nationalen Sicherheitsbehörden und anderen Unternehmen erstellt wurde, besagt, dass 96 Prozent der Angriffe "nicht sehr schwierig" waren und dass "97 Prozent der Verstöße durch einfache oder zwischen Steuerelemente vermeidbar waren". Diese Ergebnisse sind möglicherweise eine direkte Folge der folgenden häufig genutzten Sicherheitsrisiken.  
  
### <a name="gaps-in-antivirus-and-antimalware-deployments"></a>Lücken bei Antiviren-und antischadsoftwarebereitstellungen  
*Gesetz Nummer 8: ein veralteter Malware Scanner ist nur geringfügig besser geeignet als überhaupt kein Scanner.* - [zehn unveränderliche Sicherheitsgesetze (Version 2,0)](https://technet.microsoft.com/security/hh278941.aspx)  
  
Bei der Analyse der Antiviren-und antischadsoftwarebereitstellungen von Organisationen wird häufig eine Umgebung angezeigt, in der die meisten Arbeitsstationen mit aktiviertem und aktuellem Antivirenprogramm und Antischadsoftware konfiguriert sind. Ausnahmen sind in der Regel Arbeitsstationen, die selten mit der Unternehmensumgebung oder Mitarbeitern von Mitarbeitern verbunden sind, für die Antivirus-und Antischadsoftware schwer bereitgestellt, konfiguriert und aktualisiert werden kann.  
  
Die Server Population ist jedoch tendenziell in vielen kompromittierten Umgebungen weniger konsistent. Wie bei der 2012-unter [suchung der Datenverletzungen](http://www.verizonbusiness.com/resources/reports/rp_data-breach-investigations-report-2012_en_xg.pdf)berichtet, sind bei 94 Prozent aller Daten in den Servern beteiligte Server, was eine Erhöhung von 18 Prozent im Vergleich zum vorherigen Jahr darstellt, und 69 Prozent der Angriffe auf Schadsoftware. Bei der Server Population ist es nicht ungewöhnlich, dass Antiviren-und antischadsoftwareinstallationen inkonsistent konfiguriert, veraltet, falsch konfiguriert oder sogar deaktiviert sind. In einigen Fällen wird die Antivirussoftware und die Antischadsoftware von Administratoren deaktiviert. in anderen Fällen deaktivieren Sie die Software, nachdem ein Server durch andere Sicherheitsrisiken kompromittiert wurde. Wenn die Virenschutz-und antischadsoftwaresoftware deaktiviert ist, werden die Angreifer Schadsoftware auf dem Server und den Schwerpunkt auf das Propagieren der Kompromittierung über die Server Population.  
  
Es ist wichtig, nicht nur sicherzustellen, dass Ihre Systeme durch aktuellen, umfassenden Schutz vor Schadsoftware geschützt sind, sondern auch zum Überwachen von Systemen zur Deaktivierung oder Entfernung von Antivirensoftware und Antischadsoftware und zum automatischen Neustarten des Schutzes. manuell deaktiviert. Obwohl keine Antivirus-und antischadsoftwaresoftware die Verhinderung und Erkennung aller Infektionen gewährleisten kann, kann eine ordnungsgemäß konfigurierte und bereitgestellte Antivirus-und antischadsoftwareimplementierung die Wahrscheinlichkeit einer Infektion verringern  
  
### <a name="incomplete-patching"></a>Unvollständiges Patchen  
*Gesetz Nummer 3: Wenn Sie nicht mit Sicherheitskorrekturen Schritt halten, ist Ihr Netzwerk für lange nicht Ihre eigene Lösung.* - [10 unveränderliche Gesetze der Sicherheitsverwaltung](https://technet.microsoft.com/library/cc722488.aspx)  
  
Microsoft gibt Sicherheits Bulletins am zweiten Dienstag eines jeden Monats frei, obwohl in seltenen Fällen Sicherheitsupdates zwischen den monatlichen Sicherheitsupdates veröffentlicht werden (diese werden auch als "Out-of-Band"-Updates bezeichnet), wenn die Sicherheits Anfälligkeit für eine bestimmte ein dringendes Risiko für Kunden Systeme. Ob ein kleines Unternehmen seine Windows-Computer für die Verwendung von Windows Update zur Verwaltung von System-und anwendungspatching konfiguriert oder eine große Organisation Verwaltungssoftware wie Microsoft Endpoint Configuration Manager verwendet, um Patches gemäß den detaillierten hierarchische Pläne: viele Kunden Patchen Ihre Windows-Infrastrukturen relativ rechtzeitig.  
  
In einigen Infrastrukturen sind jedoch nur Windows-Computer und Microsoft-Anwendungen enthalten, und in kompromittierten Umgebungen wird häufig festgestellt, dass die patchverwaltungsstrategie der Organisation Lücken enthält. Windows-Systeme in diesen Umgebungen sind inkonsistent gepatcht. Nicht-Windows-Betriebssysteme werden sporadisch, wenn überhaupt, gepatcht. Gewerbliche Anwendungen für den Einsatz von Anwendungen im Regal enthalten Sicherheitsrisiken, für die Patches vorhanden sind, die jedoch nicht angewendet wurden. Netzwerkgeräte werden häufig mit den standardmäßigen Standard Anmelde Informationen konfiguriert, und nach Ihrer Installation werden Jahre nicht aktualisiert. Anwendungen und Betriebssysteme, die nicht mehr von ihren Anbietern unterstützt werden, werden häufig weiterhin ausgeführt, trotz der Tatsache, dass Sie nicht mehr gegen Sicherheitsrisiken gepatcht werden können. Jedes dieser nicht gepatchten Systeme stellt einen anderen potenziellen Einstiegspunkt für Angreifer dar.  
  
Dank der verbraucherorientierten IT-Abteilung wurden zusätzliche Herausforderungen eingeführt, da Mitarbeiter eigene Geräte für den Zugriff auf unternehmenseigene Daten verwendet werden. die Organisation hat möglicherweise nur wenig Kontrolle über das Patchen und die Konfiguration der persönlichen Geräte der Mitarbeiter. Hardware auf Unternehmens Niveau wird in der Regel mit Unternehmens bereiten Konfigurationsoptionen und Verwaltungsfunktionen ausgeliefert und bietet kostenlose Auswahl bei individueller Anpassung und Geräteauswahl. Mitarbeiterorientierte Hardware bietet eine größere Anzahl von Herstellern, Anbietern, Hardware Sicherheitsfeatures, Software Sicherheitsfeatures, Verwaltungsfunktionen und Konfigurationsoptionen, und viele Unternehmensfunktionen sind möglicherweise nicht vollständig vorhanden.  
  
#### <a name="patch-and-vulnerability-management-software"></a>Software für Patch-und Sicherheitsrisiko Verwaltung  
Wenn ein effektives Patchverwaltungssystem für die Windows-Systeme und Microsoft-Anwendungen vorhanden ist, wurde ein Teil der Angriffsfläche, die nicht gepatchte Schwachstellen erstellen, behandelt. Allerdings bleibt die Infrastruktur anfällig, es sei denn, die nicht-Windows-Systeme, nicht-Microsoft-Anwendungen, Netzwerkinfrastrukturen und Mitarbeiter Geräte werden ebenfalls auf Patches und anderen Korrekturen auf dem neuesten Stand gehalten. In einigen Fällen kann der Hersteller einer Anwendung automatische Aktualisierungs Funktionen anbieten. in anderen Fällen ist es möglicherweise notwendig, einen Ansatz zum regelmäßigen abrufen und Anwenden von Patches und anderen Korrekturen zu entwickeln.
  
### <a name="outdated-applications-and-operating-systems"></a>Veraltete Anwendungen und Betriebssysteme  
*"Sie können nicht erwarten, dass ein sechsjähriges Betriebssystem Sie vor einem sechsmonatigen Angriff schützt."* -Information Security Professional mit 10 Jahre Erfahrung bei der Sicherung von Enterprise-Installationen  
  
Obwohl "Get Current, stay Current" wie ein Marketingbegriff klingen mag, haben veraltete Betriebssysteme und Anwendungen Risiken in den IT-Infrastrukturen vieler Organisationen. Ein Betriebssystem, das in 2003 veröffentlicht wurde, wird möglicherweise dennoch vom Hersteller unterstützt und mit Updates zur Behebung von Sicherheitsrisiken bereitgestellt. das Betriebssystem enthält jedoch möglicherweise keine Sicherheitsfeatures, die in neueren Versionen des Betriebssystems hinzugefügt wurden. Veraltete Systeme können sogar eine Schwächung bestimmter AD DS Sicherheits Konfigurationen erfordern, um die geringeren Funktionen dieser Computer zu unterstützen.  
  
Anwendungen, die so geschrieben wurden, dass ältere Authentifizierungsprotokolle von Anbietern verwendet werden, die die Anwendung nicht mehr unterstützen, können in der Regel nicht zur Unterstützung stärkerer Authentifizierungsmechanismen umgestaltet werden. Allerdings kann die Active Directory Domäne eines Unternehmens weiterhin so konfiguriert werden, dass LAN-Manager-Hashes oder Umkehr verschlüsselte Kenn Wörter gespeichert werden, um solche Anwendungen zu unterstützen. Anwendungen, die vor der Einführung neuerer Betriebssysteme geschrieben wurden, funktionieren möglicherweise nicht gut oder auf den aktuellen Betriebssystemen, sodass Unternehmen ältere und ältere Systeme pflegen und in einigen Fällen vollständig nicht unterstützte Hardware und Software benötigen.  
  
In Fällen, in denen Organisationen ihre Domänen Controller auf Windows Server 2012, Windows Server 2008 R2 oder Windows Server 2008 aktualisiert haben, ist es normalerweise üblich, bedeutende Teile der Mitglieder Server Population zu finden, auf denen Windows Server 2003, Windows ausgeführt wird. 2000 Server oder Windows NT Server 4,0 (diese werden vollständig nicht unterstützt). Wenn ein Unternehmen längere Systeme beibehält, desto größer die Unterschiede zwischen den Featuresätzen, und desto wahrscheinlicher wird es, dass Produktionssysteme nicht mehr unterstützt werden. Wenn außerdem eine Active Directory-Gesamtstruktur länger verwaltet wird, beobachten wir, dass ältere Systeme und Anwendungen in upgradeplänen fehlen. Dies kann bedeuten, dass ein einzelner Computer, auf dem eine einzelne Anwendung ausgeführt wird, Sicherheitsrisiken für die Domäne oder Gesamtstruktur verursachen kann, da Active Directory für die Unterstützung der Legacy Protokolle und Authentifizierungsmechanismen konfiguriert ist.  
  
Um Legacy Systeme und Anwendungen auszuschließen, sollten Sie sich zunächst auf die Identifizierung und Katalogisierung konzentrieren und dann bestimmen, ob die Anwendung oder der Host aktualisiert oder ersetzt werden soll. Obwohl es schwierig sein kann, Ersetzungen für hoch spezialisierte Anwendungen zu finden, für die weder Unterstützung noch ein Upgradepfad verfügbar ist, können Sie ein Konzept mit dem Namen "Creative Zerstörung" nutzen, um die Legacy Anwendung durch eine neue Anwendung zu ersetzen. , die die erforderliche Funktionalität bereitstellt. Die [Planung einer](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Planning-for-Compromise.md) Gefährdung wird weiter unten in diesem Dokument ausführlicher in "Planen der Gefährdung" beschrieben.  
  
### <a name="misconfiguration"></a>Fehlkonfiguration  
*Gesetzliche Nummer 4: Es ist nicht sehr gut, Sicherheitskorrekturen auf einem Computer zu installieren, der noch nie gesichert wurde.* - [10 unveränderliche Gesetze der Sicherheitsverwaltung](https://technet.microsoft.com/library/cc722488.aspx)  
  
Auch in Umgebungen, in denen Systeme im allgemeinen aktuell gehalten und gepatcht werden, erkennen wir häufig Lücken oder Fehlkonfigurationen im Betriebssystem, auf Computern ausgelaufende Anwendungen und Active Directory. Einige Fehlkonfigurationen machen nur den lokalen Computer zur Gefährdung verfügbar, aber nach dem "Besitzer" eines Computers konzentrieren sich Angreifer in der Regel auf die Weitergabe der Gefährdung über andere Systeme und schließlich auf die Active Directory. Im folgenden finden Sie einige der allgemeinen Bereiche, in denen die Konfiguration von Risiken erkannt wird.  
  
#### <a name="in-active-directory"></a>In Active Directory  
Die Konten in Active Directory, die am häufigsten von Angreifern betroffen sind, sind Mitglieder der Gruppen mit den meisten Berechtigungen, z. b. Mitglieder der Gruppe "Domänen-Admins", "Organisations-Admins" oder "Integrierte Administratoren" (BA) in "aktiv". Befinden. Die Mitgliedschaft dieser Gruppen sollte auf die kleinste Anzahl von Konten reduziert werden, sodass die Angriffsfläche dieser Gruppen eingeschränkt ist. Es ist sogar möglich, die "permanente" Mitgliedschaft in diesen privilegierten Gruppen auszuschließen. Das heißt, Sie können Einstellungen implementieren, mit denen Sie diese Gruppen temporär auffüllen können, wenn Ihre Domänen-und Gesamtstruktur weiten Berechtigungen benötigt werden. Wenn Konten mit hohen Berechtigungen verwendet werden, sollten Sie nur für festgelegte, sichere Systeme wie z. b. Domänen Controller oder sichere administrative Hosts verwendet werden. Ausführliche Informationen zur Implementierung all dieser Konfigurationen finden Sie unter [reduzieren der Angriffsfläche für Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md).  
  
Wenn wir die Mitgliedschaft der Gruppen mit den höchsten Berechtigungen in Active Directory evaluieren, finden wir häufig eine übermäßige Mitgliedschaft in allen drei der am stärksten privilegierten Gruppen. In manchen Fällen verfügen Organisationen über Dutzende, sogar Hunderte von Konten in da-Gruppen. In anderen Fällen platzieren Organisationen Konten direkt in integrierte Administratoren Gruppen und denken dabei, dass die Gruppe "weniger privilegiert" ist als die Gruppe "das". Es ist nicht. In der Stamm Domäne der Gesamtstruktur finden wir häufig einige permanente Mitglieder der EA-Gruppe, trotz der Tatsache, dass EA-Berechtigungen nur selten und vorübergehend benötigt werden. Es ist auch üblich, das alltägliche Administrator Konto eines IT-Benutzers in allen drei Gruppen zu finden, auch wenn dies eine effektiv redundante Konfiguration ist. Wie unter [reduzieren der Active Directory Angriffsfläche](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md)beschrieben, ob ein Konto ein dauerhaftes Mitglied einer dieser Gruppen oder alle ist, kann das Konto verwendet werden, um die AD DS Umgebung und die von ihm verwalteten Systeme und Konten zu gefährden. Empfehlungen für die sichere Konfiguration und Verwendung privilegierter Konten in Active Directory werden unter [reduzieren der Active Directory Angriffsfläche](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md)bereitgestellt.  
  
#### <a name="on-domain-controllers"></a>Auf Domänen Controllern  
Beim Bewerten von Domänen Controllern finden diese häufig konfigurierte und verwaltete Domänen Controller nicht anders als Mitglieds Server. In den Domänen Controllern werden manchmal dieselben Anwendungen und Hilfsprogramme auf Mitglieds Servern installiert, nicht, weil Sie auf den Domänen Controllern benötigt werden, aber weil die Anwendungen Teil eines Standardbuilds sind. Diese Anwendungen bieten möglicherweise nur minimale Funktionalität auf den Domänen Controllern, erhöhen jedoch die Angriffsfläche erheblich, indem Sie Konfigurationseinstellungen für das Öffnen von Ports, das Erstellen von Dienst Konten mit hohen Berechtigungen oder das Erstellen von Zugriff auf das System durch Benutzer benötigen, Es sollte keine Verbindung mit einem Domänen Controller für andere Zwecke als die Authentifizierung und Gruppenrichtlinie Anwendung hergestellt werden. Bei manchen Sicherheitsverletzungen haben Angreifer Tools verwendet, die bereits auf Domänen Controllern installiert waren, um Zugriff auf die Domänen Controller zu erhalten, jedoch die AD DS Datenbank zu ändern oder zu beschädigen.  
  
Wenn wir die Internet Explorer-Konfigurationseinstellungen auf Domänen Controllern extrahieren, stellen wir fest, dass sich Benutzer mit Konten angemeldet haben, die über eine hohe Berechtigungsebene in Active Directory verfügen und die Konten für den Zugriff auf das Internet und das Intranet aus der Domäne verwendet haben. kontrolliert. In einigen Fällen haben die Konten Internet Explorer-Einstellungen auf den Domänen Controllern konfiguriert, um das Herunterladen von Internetinhalten zu ermöglichen, und die Freeware-Hilfsprogramme wurden von den Internet Sites heruntergeladen und auf den Domänen Controllern installiert. Die verstärkte Sicherheitskonfiguration für Internet Explorer ist standardmäßig für Benutzer und Administratoren aktiviert, aber wir beobachten häufig, dass für Administratoren deaktiviert wurde. Wenn ein Konto mit weitreichenden Berechtigungen auf das Internet zugreift und Inhalte auf einen beliebigen Computer herunterlädt, wird dieser Computer zu einem schwerwiegenden Risiko. Wenn der Computer ein Domänen Controller ist, ist die gesamte AD DS Installation gefährdet.  
  
##### <a name="protecting-domain-controllers"></a>Schutz der Domänen Controller  
Domänen Controller sollten als kritische Infrastrukturkomponenten behandelt werden, die flexibler geschützt und besser konfiguriert werden als Datei-, Druck-und Anwendungsserver. Domänen Controller sollten keine Software ausführen, die nicht erforderlich ist, damit der Domänen Controller funktioniert, oder den Domänen Controller gegen Angriffe schützt. Domänen Controller dürfen nicht auf das Internet zugreifen können, und die Sicherheitseinstellungen sollten durch Gruppenrichtlinie Objekte (GPOs) konfiguriert und erzwungen werden. Ausführliche Empfehlungen für die sichere Installation, Konfiguration und Verwaltung von Domänen Controllern finden Sie unter [Sichern von Domänen Controllern gegen Angriffe](../../../ad-ds/plan/security-best-practices/Securing-Domain-Controllers-Against-Attack.md).  
  
#### <a name="within-the-operating-system"></a>Innerhalb des Betriebssystems  
*Gesetzliche Nummer 2: Wenn ein fehlerhafter Entwickler das Betriebssystem auf Ihrem Computer ändern kann, ist es nicht mehr der Computer.* - [zehn unveränderliche Sicherheitsgesetze (Version 2,0)](https://technet.microsoft.com/security/hh278941.aspx)  
  
Obwohl einige Organisationen grundlegende Konfigurationen für Server verschiedener Typen erstellen und eine eingeschränkte Anpassung des Betriebssystems nach der Installation zulassen, deckt die Analyse kompromittierter Umgebungen häufig die große Anzahl von Servern auf, die in einem Ad-hoc-Weise und manuell und unabhängig konfiguriert. Konfigurationen zwischen zwei Servern, die dieselbe Funktion ausführen, unterscheiden sich möglicherweise vollständig, wenn keiner der Server sicher konfiguriert ist. Umgekehrt können Server konfigurationsbaselines konsistent erzwungen, aber auch konsistent falsch konfiguriert werden. Das heißt, dass Server so konfiguriert werden, dass auf allen Servern eines bestimmten Typs dasselbe Sicherheitsrisiko entsteht. Die Fehlkonfiguration umfasst Verfahren wie das Deaktivieren von Sicherheitsfunktionen, das Gewähren von übermäßigen rechten und Berechtigungen für Konten (insbesondere Dienst Konten), die Verwendung identischer lokaler Anmelde Informationen über Systeme hinweg und das Zulassen der Installation von nicht autorisierte Anwendungen und Hilfsprogramme, die eigene Sicherheitslücken erzeugen.  
  
##### <a name="disabling-security-features"></a>Deaktivieren von Sicherheitsfunktionen  
Unternehmen deaktivieren die Windows-Firewall mit erweiterter Sicherheit (wfas) gelegentlich aus der Annahme, dass wfas schwierig zu konfigurieren ist oder eine arbeitsintensive Konfiguration erfordert. Beginnend mit Windows Server 2008, wenn eine Rolle oder ein Feature auf einem Server installiert ist, wird Sie jedoch standardmäßig mit den geringsten Berechtigungen konfiguriert, die für die Funktion oder das Feature erforderlich sind, und die Windows-Firewall wird automatisch für die Unterstützung der Rolle konfiguriert. oder-Funktion. Durch die Deaktivierung von wfas (und nicht die Verwendung einer anderen Host basierten Firewall) erhöhen Organisationen die Angriffsfläche der gesamten Windows-Umgebung. Perimeterfirewalls bieten einen gewissen Schutz vor Angriffen, die direkt auf eine Umgebung aus dem Internet abzielen. Sie bieten jedoch keinen Schutz vor Angriffen, die andere Angriffsvektoren ausnutzen, z. b. Angriffe [durch herunter](https://www.microsoft.com/security/sir/glossary/drive-by-download-sites.aspx) geladene Angriffe oder Angriffe aus anderen kompromittierten Systemen im Intranet.  
  
Die Einstellungen der Benutzerkontensteuerung (User Account Control, UAC) werden auf den Servern manchmal deaktiviert, da die Administrator Mitarbeiter die Aufforderungen finden Obwohl in [Microsoft-Support Artikel 2526083](https://support.microsoft.com/kb/2526083) Szenarios beschrieben werden, in denen die Benutzerkontensteuerung unter Windows Server möglicherweise deaktiviert ist, sollten Sie die Benutzerkontensteuerung ohne sorgfältige Überlegung und Recherche nicht deaktivieren, es sei denn, Sie führen eine Server Core-Installation aus.  
  
In anderen Fällen sind Servereinstellungen für weniger sichere Werte konfiguriert, da Unternehmen veraltete Server Konfigurationseinstellungen auf neue Betriebssysteme anwenden, z. b. das Anwenden von Windows Server 2003-Basis Linien auf Computer, auf denen Windows Server 2012, Windows ausgeführt wird. Server 2008 R2 oder Windows Server 2008, ohne die Basis Linien so zu ändern, dass Sie die Änderungen im Betriebssystem widerspiegeln. Überprüfen Sie bei der Bereitstellung eines neuen Betriebssystems nicht die alten Server Basis Linien für neue Betriebssysteme, und überprüfen Sie die Sicherheitsänderungen und Konfigurationseinstellungen, um sicherzustellen, dass die implementierten Einstellungen anwendbar und für das neue Betriebssystem geeignet sind.  
  
##### <a name="granting-excessive-privilege"></a>Gewähren von übermäßigen Berechtigungen  
In nahezu jeder Umgebung, die wir bewertet haben, werden lokale und Domänen basierte Konten übermäßige Berechtigungen auf Windows-Systemen gewährt. Benutzern werden lokale Administrator Rechte auf ihren Arbeitsstationen gewährt. Mitglieds Server führen Dienste aus, die mit rechten konfiguriert sind, die über die erforderlichen Berechtigungen hinausgehen, und lokale Administratoren Gruppen auf der gesamten Server Population enthalten Dutzende oder sogar Hunderte von lokale Konten und Domänen Konten. Wenn nur ein privilegiertes Konto auf einem Computer kompromittiert wird, können Angreifer die Konten aller Benutzer und Dienste, die sich am Computer anmelden, kompromittieren und Anmelde Informationen zur Weitergabe der Gefährdung an andere Systeme nutzen.  
  
Obwohl die Pass-the-Hash-Angriffe (PTH) und andere Angriffe auf Anmelde Informationen heutzutage noch heute sehr universell sind, liegt dies daran, dass es kostenlos verfügbare Tools gibt, die es Ihnen erleichtern, die Anmelde Informationen anderer privilegierter Konten zu extrahieren, wenn ein Angreifer einen Administrator erlangt hat. oder auf System Ebene auf einen Computer zugreifen. Auch ohne Tools, mit denen Anmelde Informationen aus Anmelde Sitzungen erfasst werden können, kann ein Angreifer mit privilegiertem Zugriff auf einen Computer einfach Tastatureingaben, Screenshots und Inhalte der Zwischenablage aufzeichnen. Ein Angreifer mit privilegiertem Zugriff auf einen Computer kann Antischadsoftware deaktivieren, Rootkits installieren, geschützte Dateien ändern oder Schadsoftware auf dem Computer installieren, von dem aus Angriffe automatisiert werden, oder ein Server wird zu einem [von einem Laufwerk](https://www.microsoft.com/security/sir/glossary/drive-by-download-sites.aspx) geladenen Host.  
  
Die Taktiken, mit denen eine Verletzung über einen einzelnen Computer hinaus erweitert wird, sind unterschiedlich, aber der Schlüssel für die Weitergabe von Kompromittierung ist der Erwerb eines hoch privilegierten Zugriffs auf weitere Systeme. Indem Sie die Anzahl der Konten mit privilegiertem Zugriff auf ein beliebiges System verringern, verringern Sie die Angriffsfläche nicht nur auf diesem Computer, sondern die Wahrscheinlichkeit, dass ein Angreifer wertvolle Anmelde Informationen vom Computer erlädt.  
  
##### <a name="standardizing-local-administrator-credentials"></a>Standardisierungs lokaler Administrator Anmelde Informationen  
Es wurde seit längerer Zeit zwischen den Sicherheitsexperten diskutiert, ob beim Umbenennen lokaler Administrator Konten auf Windows-Computern ein Wert vorhanden ist. Wichtig für lokale Administrator Konten ist, ob Sie mit demselben Benutzernamen und Kennwort auf mehreren Computern konfiguriert sind.  
  
Wenn das lokale Administrator Konto dem gleichen Wert Server übergreifend zugewiesen ist und das Kennwort, das dem Konto zugewiesen ist, ebenfalls auf denselben Wert festgelegt ist, können Angreifer die Anmelde Informationen des Kontos auf einem Computer extrahieren, auf dem der Administrator oder der Zugriff auf System Ebene wurde abgerufen. Der Angreifer muss das Administrator Konto nicht anfänglich kompromittieren. Sie müssen nur das Konto eines Benutzers kompromittieren, der Mitglied der lokalen Administrator Gruppe ist, oder ein Dienst Konto, das für die Verwendung als LocalSystem oder mit Administrator Rechten konfiguriert ist. Der Angreifer kann dann die Anmelde Informationen für das Administrator Konto extrahieren und diese Anmelde Informationen in Netzwerk Anmeldungen bei anderen Computern im Netzwerk wiedergeben.  
  
Solange ein anderer Computer über ein lokales Konto mit dem gleichen Benutzernamen und Kennwort (oder Kenn Wort Hash) wie die angezeigten Konto Anmelde Informationen verfügt, ist der Anmeldeversuch erfolgreich, und der Angreifer erhält privilegierten Zugriff auf den Zielcomputer. In den aktuellen Versionen von Windows ist das integrierte Administrator Konto [standardmäßig deaktiviert](https://technet.microsoft.com/library/cc753450.aspx), aber in älteren Betriebssystemen ist das Konto standardmäßig aktiviert.  
  
> [!NOTE]  
> Einige Organisationen haben absichtlich lokale Administrator Konten so konfiguriert, dass Sie in der Annahme aktiviert werden, dass dies ein "failsafe" ist, wenn alle anderen privilegierten Konten von einem System gesperrt sind. Auch wenn das lokale Administrator Konto deaktiviert ist und keine anderen Konten verfügbar sind, die das Konto aktivieren oder sich am System mit Administrator Rechten anmelden können, kann das System im abgesicherten Modus gestartet werden, und das integrierte lokale Administrator Konto kann erneut aktiviert werden, wie in [Microsoft-Support Artikel 814777](https://support.microsoft.com/kb/814777)beschrieben. Wenn das System GPOs weiterhin erfolgreich anwendet, kann ein GPO geändert werden (vorübergehend), um das Administrator Konto erneut zu aktivieren, oder es können eingeschränkte Gruppen konfiguriert werden, um der lokalen Administrator Gruppe ein domänenbasiertes Konto hinzuzufügen. Reparaturen können ausgeführt werden, und das Administrator Konto kann erneut deaktiviert werden. Um eine lateral Kompromittierung, bei der die Anmelde Informationen des integrierten lokalen Administrator Kontos verwendet werden, effektiv zu verhindern, müssen eindeutige Benutzernamen und Kenn Wörter für lokale Administrator Konten konfiguriert werden. Informationen zum Bereitstellen eindeutiger Kenn Wörter für lokale Administrator Konten über ein GPO finden Sie unter [Lösung für die Verwaltung des integrierten Administrator Konto Kennworts über das](https://technet.microsoft.com/mt227395.aspx) Gruppenrichtlinien Objekt auf TechNet.  
  
##### <a name="permitting-installation-of-unauthorized-applications"></a>Zulassen der Installation nicht autorisierter Anwendungen  
*Recht Nummer eins: Wenn ein fehlerhafter Experte Sie dazu überreden kann, sein Programm auf Ihrem Computer auszuführen, ist es nicht mehr allein der Computer.* - [zehn unveränderliche Sicherheitsgesetze (Version 2,0)](https://technet.microsoft.com/security/hh278941.aspx)  
  
Unabhängig davon, ob eine Organisation konsistente Baseline-Einstellungen auf allen Servern bereitstellt, sollte die Installation von Anwendungen, die nicht Teil der definierten Rolle eines Servers sind, nicht zulässig sein. Durch das Zulassen der Installation von Software, die nicht Teil der von einem Server festgelegten Funktionalität ist, werden Server für unbeabsichtigte oder böswillige Installationen von Software bereitgestellt, die die Angriffsfläche des Servers erhöht, Anwendungs Sicherheitslücken auslöst oder System Instabilität.  
  
#### <a name="applications"></a>Anwendungen  
Wie bereits beschrieben, werden Anwendungen häufig installiert und konfiguriert, um Konten zu verwenden, denen mehr Berechtigungen erteilt werden, als die Anwendung tatsächlich benötigt. In einigen Fällen gibt die Dokumentation der Anwendung an, dass Dienst Konten Mitglieder der lokalen Administrator Gruppe eines Servers sein müssen oder für die Verwendung im Kontext des localsystems konfiguriert werden müssen. Dies liegt häufig daran, dass die Anwendung diese Rechte erfordert, aber da die Bestimmung der Rechte und Berechtigungen, die für die Dienst Konten einer Anwendung erforderlich sind, zusätzliche Zeit und Mühe erfordert. Wenn eine Anwendung nicht mit den minimalen Berechtigungen installiert wird, die für die Funktionsweise der Anwendung und der konfigurierten Funktionen erforderlich sind, ist das System für Angriffe verfügbar, die Anwendungs Privilegien ohne Angriffe gegen das Betriebssystem selbst nutzen.  
  
### <a name="lack-of-secure-application-development-practices"></a>Fehlende sichere Anwendungs Entwicklungsverfahren  
Infrastruktur ist für die Unterstützung von geschäftsworkloads vorhanden. Wenn diese Arbeits Auslastungen in benutzerdefinierten Anwendungen implementiert werden, ist es wichtig, sicherzustellen, dass die Anwendungen mit sicheren bewährten Methoden entwickelt werden. Die Ursachenanalyse von unternehmensweiten Vorfällen zeigt häufig, dass eine anfängliche Gefährdung durch benutzerdefinierte Anwendungen, insbesondere solche, die mit dem Internet zu tun haben, beeinträchtigt wird. Die meisten dieser Kompromisse werden durch die Kompromittierung bekannter Angriffe wie SQL Injection (SQLI) und Cross-Site Scripting (XSS)-Angriffe erreicht.  
  
Bei SQL Injection handelt es sich um ein Anwendungs Sicherheitsrisiko, mit dem benutzerdefinierte Eingaben eine SQL-Anweisung ändern können, die zur Ausführung an die Datenbank übermittelt wird. Diese Eingabe kann über ein Feld in der Anwendung, einen Parameter (z. b. die Abfrage Zeichenfolge oder ein Cookie) oder andere Methoden bereitgestellt werden. Das Ergebnis dieser Injektion ist, dass die SQL-Anweisung, die für die Datenbank bereitgestellt wird, sich grundlegend von der Absicht des Entwicklers unterscheidet. Nehmen Sie z. b. eine gängige Abfrage, die bei der Auswertung einer Kombination aus Benutzername und Kennwort verwendet wird:  
  
`SELECT userID FROM users WHERE username = 'sUserName' AND password = 'sPassword'`  
  
Wenn dies vom Datenbankserver empfangen wird, weist Sie den Server an, die Benutzertabelle zu durchsuchen und jeden UserID-Datensatz zurückzugeben, wobei der Benutzername und das Kennwort mit den Angaben des Benutzers (vermutlich über ein Anmeldeformular einiger Art) identisch sind. Natürlich sollte der Entwickler in diesem Fall nur einen gültigen Datensatz zurückgeben, wenn der Benutzer einen richtigen Benutzernamen und ein gültiges Kennwort bereitstellen kann. Wenn einer der beiden fehlerhaft ist, kann der Datenbankserver keinen übereinstimmenden Datensatz finden und ein leeres Ergebnis zurückgeben.  
  
Das Problem tritt auf, wenn ein Angreifer unerwartete Daten durchführt, z. b. durch die Angabe seines eigenen SQL-Codes anstelle gültiger Daten. Da SQL auf dem Datenbankserver dynamisch interpretiert wird, wird der eingefügte Code so verarbeitet, als ob der Entwickler ihn in sich selbst eingefügt hätte. Wenn der Angreifer beispielsweise den **Administrator** für die Benutzer-ID und **XYZ** oder **1 = 1** als Kennwort eingegeben hat, lautet die von der Datenbank verarbeitete Anweisung wie folgt:  
  
`SELECT userID FROM users WHERE username = 'administrator' AND password = 'xyz' OR 1=1`  
  
Wenn diese Abfrage vom Datenbankserver verarbeitet wird, werden alle Zeilen in der Tabelle in der Abfrage zurückgegeben, da 1 = 1 immer als true ausgewertet wird. daher spielt es keine Rolle, ob der richtige Benutzername und das richtige Kennwort bekannt oder bereitgestellt werden. Das Ergebnis ist in den meisten Fällen, dass der Benutzer als erster Benutzer in der Datenbank des Benutzers angemeldet wird. in den meisten Fällen ist dies der administrative Benutzer.  
  
Neben der einfachen Anmeldung können auch falsch formatierte SQL-Anweisungen wie diese zum Hinzufügen, löschen oder Ändern von Daten oder sogar zum Löschen (Löschen) ganzer Tabellen aus einer Datenbank verwendet werden. In den extremsten Fällen, in denen SQLI mit übermäßigen Berechtigungen kombiniert wird, können Betriebssystembefehle ausgeführt werden, um das Erstellen neuer Benutzer, das Herunterladen von Angriffs Tools oder das Ausführen anderer Aktionen der Angreifer zu ermöglichen.  
  
Bei der standortübergreifenden Skripterstellung wird das Sicherheitsrisiko in der Ausgabe der Anwendung eingeführt. Ein Angriff beginnt mit einem Angreifer, der der Anwendung falsch formatierte Daten bereitstellt, aber in diesem Fall sind die falsch formatierten Daten in Form von Skriptcode (z. b. JavaScript), der vom Browser des Opfers ausgeführt wird. Die Ausnutzung eines XSS-Sicherheitsrisikos kann es Angreifern ermöglichen, beliebige Funktionen der Zielanwendung im Kontext des Benutzers auszuführen, der den Browser gestartet hat. XSS-Angriffe werden in der Regel durch eine Phishing-e-Mail initiiert, die den Benutzer dazu ermutigt, auf einen Link zu klicken, der mit der Anwendung verbunden ist  
  
XSS wird häufig in Online-Banking-und e-Commerce-Szenarien ausgenutzt, in denen ein Angreifer Käufe tätigen oder Geld in den Kontext des ausgenutzten Benutzers übertragen kann. Im Fall eines gezielten Angriffs auf eine benutzerdefinierte webbasierte Identitäts Verwaltungs Anwendung kann es Angreifern ermöglichen, ihre eigenen Identitäten zu erstellen, Berechtigungen und Rechte zu ändern und zu einer systemischen Gefährdung zu führen.  
  
Obwohl eine vollständige Erörterung von Cross-Site Scripting und SQL Injection den Rahmen dieses Dokuments sprengen würde, veröffentlicht das [Open Web Application Security Project (OWASP)](https://www.owasp.org/index.php/Main_Page) eine Top 10-Liste mit ausführlicher Erörterung der Sicherheitsrisiken und Gegenmaßnahmen.  
  
Unabhängig von der Investition in die Infrastruktur Sicherheit, wenn schlecht gestaltete und geschriebene Anwendungen innerhalb dieser Infrastruktur bereitgestellt werden, ist die Umgebung anfällig für Angriffe. Selbst gut gesicherte Infrastrukturen können für diese Anwendungs Angriffe oft keine effektiven Gegenmaßnahmen bereitstellen. Um das Problem zu beheben, ist es unter Umständen erforderlich, dass Dienst Konten übermäßige Berechtigungen erteilt werden, damit die Anwendung funktioniert.  
  
Der Microsoft Security Development Lifecycle (SDL) ist ein Satz von strukturellen Prozesssteuerungen, die zur Verbesserung der Sicherheit beitragen, beginnend bei den Anforderungen, die durch den Lebenszyklus der Anwendung gesammelt und erweitert werden, bis Sie außer Betrieb genommen wird. Diese Integration effektiver Sicherheits Steuerungen ist aus Sicherheitsgründen nicht nur wichtig. es ist wichtig, sicherzustellen, dass die Anwendungssicherheit Kosten und eine effektive Planung ist. Wenn Sie eine Anwendung in Bezug auf Sicherheitsprobleme bei der effektiven Code Complete bewerten, müssen Organisationen Entscheidungen zur Anwendungssicherheit nur vor oder nach der Bereitstellung der Anwendung treffen. Eine Organisation kann die Anwendungs Mängel beheben, bevor Sie die Anwendung in der Produktionsumgebung bereitstellen, Kosten und Verzögerungen verursachen, oder die Anwendung kann in der Produktionsumgebung mit bekannten Sicherheitslücken bereitgestellt werden, sodass die Organisation kompromittiert werden kann.  
  
In einigen Organisationen werden die vollständigen Kosten für die Lösung eines Sicherheitsproblems in Produktionscode über $10.000 pro Problem festgestellt, und Anwendungen, die ohne effektive SDL entwickelt wurden, können durchschnittlich mehr als zehn Probleme mit hohem Schweregrad pro 100.000 Codezeilen verursachen. In großen Anwendungen eskalieren die Kosten schnell. Im Gegensatz dazu legen viele Unternehmen einen Benchmarkwert von weniger als einem Problem pro 100.000 Codezeilen in der abschließenden Code Review Phase der SDL fest und Zielen auf null Probleme bei Anwendungen mit hohem Risiko in der Produktion.  
  
Durch die Implementierung der SDL wird die Sicherheit verbessert, indem die Sicherheitsanforderungen in den Voraussetzungen für die Erfassung und den Entwurf einer Anwendung zu einer Bedrohungsmodellierung für Anwendungen mit hohem Risiko erfordert eine effektive Schulung und Überwachung von Entwicklern. und erfordert klare, konsistente Code Standards und-Methoden. Der Nettoeffekt einer SDL-Anwendung ist eine bedeutende Verbesserung der Anwendungssicherheit, während gleichzeitig die Kosten für die Entwicklung, Bereitstellung, Wartung und Außerbetriebnahme einer Anwendung gesenkt werden. Eine ausführliche Erläuterung des Entwurfs und der Implementierung von SDL geht über den Rahmen dieses Dokuments hinaus. Weitere Informationen finden Sie im [Microsoft-Sicherheits Entwicklungszyklus](https://www.microsoft.com/security/sdl/default.aspx) .  
  


